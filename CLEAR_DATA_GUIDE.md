# üóëÔ∏è –°–∫—Ä–∏–ø—Ç—ã —É–¥–∞–ª–µ–Ω–∏—è —á–∞—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. `clear-all-chats-messages.js` - –ë—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
–ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏.

### 2. `clear-all-chats-messages-with-backup.js` - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö.

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–±–µ–∑ –±—ç–∫–∞–ø–∞)

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
node scripts/clear-all-chats-messages.js

# –ë–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
node scripts/clear-all-chats-messages.js --confirm

# –¢–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
node scripts/clear-all-chats-messages.js --organization=1

# –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ (–±–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è)
node scripts/clear-all-chats-messages.js --dry-run
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (—Å –±—ç–∫–∞–ø–æ–º) - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

```bash
# –° —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
node scripts/clear-all-chats-messages-with-backup.js

# –ë–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞
node scripts/clear-all-chats-messages-with-backup.js --no-backup

# –¢–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
node scripts/clear-all-chats-messages-with-backup.js --organization=1

# –£–∫–∞–∑–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–∞
node scripts/clear-all-chats-messages-with-backup.js --backup-dir=/path/to/backups
```

---

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

### `clear-all-chats-messages.js`

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `--confirm` | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ |
| `--organization=N` | –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å ID=N |
| `--dry-run` | –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ, –Ω–æ –Ω–µ —É–¥–∞–ª—è—Ç—å |

### `clear-all-chats-messages-with-backup.js`

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `--no-backup` | –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) |
| `--organization=N` | –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å ID=N |
| `--backup-dir=PATH` | –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `./backups`) |

---

## üìä –ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è

‚úÖ **–°–æ–æ–±—â–µ–Ω–∏—è** - –í—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `Message`  
‚úÖ **–ß–∞—Ç—ã** - –í—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `Chat`

‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`User`)
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (`Organization`)
- –¢–µ–ª–µ—Ñ–æ–Ω—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π (`OrganizationPhone`)
- –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Baileys (`BaileysAuth`)

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏

–°–∫—Ä–∏–ø—Ç `clear-all-chats-messages-with-backup.js` —Å–æ–∑–¥–∞–µ—Ç:

1. **SQL –¥–∞–º–ø** - –ü–æ–ª–Ω–∞—è –∫–æ–ø–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –§–æ—Ä–º–∞—Ç: `backup-before-clear-YYYY-MM-DD-HH-MM-SS.sql`
   - –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é

2. **JSON —ç–∫—Å–ø–æ—Ä—Ç —á–∞—Ç–æ–≤** - –î–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
   - –§–æ—Ä–º–∞—Ç: `chats-YYYY-MM-DD-HH-MM-SS.json`
   - –£–¥–æ–±–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

3. **JSON —ç–∫—Å–ø–æ—Ä—Ç —Å–æ–æ–±—â–µ–Ω–∏–π** - –°–æ–æ–±—â–µ–Ω–∏—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
   - –§–æ—Ä–º–∞—Ç: `messages-YYYY-MM-DD-HH-MM-SS.json`
   - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ—Ä—Ü–∏—è–º–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ SQL –¥–∞–º–ø–∞
psql -U postgres -d messenger_db -f ./backups/backup-before-clear-2025-11-22-14-30-00.sql

# –ò–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql -U postgres -d messenger_db < ./backups/backup-before-clear-2025-11-22-14-30-00.sql
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å –±—ç–∫–∞–ø–æ–º

```bash
node scripts/clear-all-chats-messages-with-backup.js
```

**–í—ã–≤–æ–¥:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë   üóëÔ∏è  –£–î–ê–õ–ï–ù–ò–ï –í–°–ï–• –ß–ê–¢–û–í –ò –°–û–û–ë–©–ï–ù–ò–ô (–° –ë–≠–ö–ê–ü–û–ú)        ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üìä –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...

üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

   –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π: 2
   - –ú–æ—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (ID: 1)
   - –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (ID: 2)
   –°–æ–æ–±—â–µ–Ω–∏–π: 1543
   –ß–∞—Ç–æ–≤: 87

üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏...

   –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: messenger_db
   –•–æ—Å—Ç: localhost:5432
   –§–∞–π–ª: ./backups/backup-before-clear-2025-11-22-14-30-00.sql

   ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ
   üìÅ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 2.34 MB

üíæ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON...

   ‚úÖ –ß–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã: ./backups/chats-2025-11-22-14-30-00.json
   üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 87
   üì® –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: 1543
   ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã: ./backups/messages-2025-11-22-14-30-00.json

‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Å–æ–∑–¥–∞–Ω—ã:
   SQL: ./backups/backup-before-clear-2025-11-22-14-30-00.sql
   JSON —á–∞—Ç—ã: ./backups/chats-2025-11-22-14-30-00.json
   JSON —Å–æ–æ–±—â–µ–Ω–∏—è: ./backups/messages-2025-11-22-14-30-00.json

‚ö†Ô∏è  –ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ:
   ‚Ä¢ 1543 —Å–æ–æ–±—â–µ–Ω–∏–π
   ‚Ä¢ 87 —á–∞—Ç–æ–≤
   ‚Ä¢ –î–ª—è –í–°–ï–• 2 –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π

‚ùì –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ? (yes/y): yes

üóëÔ∏è  –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...

üì® –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π...
   ‚úÖ –£–¥–∞–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: 1543
üí¨ –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤...
   ‚úÖ –£–¥–∞–ª–µ–Ω–æ —á–∞—Ç–æ–≤: 87

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë   ‚úÖ –£–î–ê–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û                            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

   –£–¥–∞–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: 1543
   –£–¥–∞–ª–µ–Ω–æ —á–∞—Ç–æ–≤: 87

üì¶ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤:
   ./backups/

üí° –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ SQL –±—ç–∫–∞–ø–∞:
   psql -U postgres -d messenger_db -f "./backups/backup-before-clear-2025-11-22-14-30-00.sql"
```

### –ü—Ä–∏–º–µ—Ä 2: –û—á–∏—Å—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

```bash
node scripts/clear-all-chats-messages.js --organization=1 --dry-run
```

**–í—ã–≤–æ–¥:**
```
üîç –†–µ–∂–∏–º DRY RUN - –¥–∞–Ω–Ω—ã–µ –ù–ï –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã

üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

   –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: –ú–æ—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (ID: 1)
   –°–æ–æ–±—â–µ–Ω–∏–π: 856
   –ß–∞—Ç–æ–≤: 45

‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ù–ï–û–ë–†–ê–¢–ò–ú–û!

–ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ:
   ‚Ä¢ 856 —Å–æ–æ–±—â–µ–Ω–∏–π
   ‚Ä¢ 45 —á–∞—Ç–æ–≤
   ‚Ä¢ –¢–æ–ª—å–∫–æ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ ID: 1

‚úÖ DRY RUN –∑–∞–≤–µ—Ä—à–µ–Ω. –î–∞–Ω–Ω—ã–µ –ù–ï –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.
```

### –ü—Ä–∏–º–µ—Ä 3: –ë—ã—Å—Ç—Ä–∞—è –æ—á–∏—Å—Ç–∫–∞ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

```bash
node scripts/clear-all-chats-messages.js --organization=1 --confirm
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–æ–≤

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### üö® –ù–ï–û–ë–†–ê–¢–ò–ú–û–ï –î–ï–ô–°–¢–í–ò–ï

- –£–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ **–ù–ï–í–û–ó–ú–û–ñ–ù–û** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–∫—Ä–æ–º–µ –∫–∞–∫ –∏–∑ –±—ç–∫–∞–ø–∞)
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--dry-run` —Å–Ω–∞—á–∞–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é **—Å –±—ç–∫–∞–ø–æ–º**

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–∫—Ä–∏–ø—Ç—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- `DATABASE_URL` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.env`
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Ç–æ–ª—å–∫–æ** –≤–µ—Ä—Å–∏—é —Å –±—ç–∫–∞–ø–æ–º

### üíæ –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ

- SQL –±—ç–∫–∞–ø –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö)
- JSON —ç–∫—Å–ø–æ—Ä—Ç —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ
node scripts/clear-all-chats-messages.js --dry-run

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É
createdb messenger_db_test
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ
pg_dump messenger_db | psql messenger_db_test

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑–µ
DATABASE_URL="postgresql://user:pass@localhost:5432/messenger_db_test" \
  node scripts/clear-all-chats-messages-with-backup.js

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
psql messenger_db_test -c "SELECT COUNT(*) FROM \"Message\";"
psql messenger_db_test -c "SELECT COUNT(*) FROM \"Chat\";"
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `DATABASE_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –î–ª—è –±—ç–∫–∞–ø–∞: —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `pg_dump` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

## üìö –°–º. —Ç–∞–∫–∂–µ

- [BAD_DECRYPT_FIX.md](./BAD_DECRYPT_FIX.md) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å–µ—Å—Å–∏–∏
- [SESSION_MANAGEMENT_README.md](./SESSION_MANAGEMENT_README.md) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Prisma: https://www.prisma.io/docs

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 22 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤**: 1.0
