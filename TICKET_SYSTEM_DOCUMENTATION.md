# üé´ –¢–∏–∫–µ—Ç-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —á–∞—Ç–æ–≤

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Ç–∏–∫–µ—Ç–æ–≤ —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–¥–µ–ª—å Chat (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è)

```prisma
model Chat {
  // === –ë–ê–ó–û–í–´–ï –ü–û–õ–Ø ===
  id                  Int          @id @default(autoincrement())
  organizationId      Int
  name                String?
  createdAt           DateTime     @default(now())
  receivingPhoneJid   String
  remoteJid           String
  isGroup             Boolean      @default(false)
  lastMessageAt       DateTime?
  
  // === –¢–ò–ö–ï–¢-–°–ò–°–¢–ï–ú–ê ===
  
  // –ù–æ–º–µ—Ä —Ç–∏–∫–µ—Ç–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤ —Ä–∞–º–∫–∞—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
  ticketNumber        Int?         // –ù–∞–ø—Ä–∏–º–µ—Ä: #12345
  
  // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
  assignedUserId      Int?
  assignedUser        User?        @relation("AssignedChats")
  assignedAt          DateTime?
  
  // –°—Ç–∞—Ç—É—Å —Ç–∏–∫–µ—Ç–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)
  status              String       @default("new")
  // –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: new, open, in_progress, resolved, closed, pending
  
  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
  priority            String       @default("normal")
  // –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: low, normal, high, urgent
  
  // –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
  tags                String?      // JSON –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫
  category            String?      // –ù–∞–ø—Ä–∏–º–µ—Ä: "—Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞", "–ø—Ä–æ–¥–∞–∂–∏"
  subject             String?      // –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
  
  // –ú–µ—Ç—Ä–∏–∫–∏
  unreadCount         Int          @default(0)
  firstResponseAt     DateTime?    // –í—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
  resolvedAt          DateTime?    // –í—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–∞
  closedAt            DateTime?    // –í—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è —Ç–∏–∫–µ—Ç–∞
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
  closeReason         String?      // –ü—Ä–∏—á–∏–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
  customerRating      Int?         // –û—Ü–µ–Ω–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ (1-5)
  internalNotes       String?      // –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
  updatedAt           DateTime     @updatedAt
  
  // –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
  ticketHistory       TicketHistory[]
}
```

### –ú–æ–¥–µ–ª—å TicketHistory

```prisma
model TicketHistory {
  id              Int      @id @default(autoincrement())
  chatId          Int
  chat            Chat     @relation(...)
  userId          Int?
  user            User?    @relation(...)
  changeType      String   // –¢–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è
  oldValue        String?  // –°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  newValue        String?  // –ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  description     String?  // –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  createdAt       DateTime @default(now())
}
```

**–¢–∏–ø—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π (changeType):**
- `status_changed` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `assigned` - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
- `unassigned` - —Å–Ω—è—Ç–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- `priority_changed` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
- `tag_added` - –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ–≥
- `tag_removed` - —É–¥–∞–ª–µ–Ω —Ç–µ–≥
- `note_added` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–º–µ—Ç–∫–∞
- `category_changed` - –∏–∑–º–µ–Ω–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- `resolved` - —Ç–∏–∫–µ—Ç —Ä–µ—à—ë–Ω
- `closed` - —Ç–∏–∫–µ—Ç –∑–∞–∫—Ä—ã—Ç
- `reopened` - —Ç–∏–∫–µ—Ç –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç
- `rated` - –∫–ª–∏–µ–Ω—Ç –æ—Å—Ç–∞–≤–∏–ª –æ—Ü–µ–Ω–∫—É

---

## üîÑ –°—Ç–∞—Ç—É—Å—ã —Ç–∏–∫–µ—Ç–æ–≤

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ç–∏–∫–µ—Ç–∞

```
new ‚Üí open ‚Üí in_progress ‚Üí resolved ‚Üí closed
  ‚Üì     ‚Üì         ‚Üì           ‚Üì
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí pending
```

**–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤:**

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è |
|--------|----------|-------------------|
| `new` | –ù–æ–≤—ã–π —Ç–∏–∫–µ—Ç | –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–∞—Ç–∞ |
| `open` | –û—Ç–∫—Ä—ã—Ç | –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ |
| `in_progress` | –í —Ä–∞–±–æ—Ç–µ | –û–ø–µ—Ä–∞—Ç–æ—Ä –Ω–∞—á–∞–ª –∞–∫—Ç–∏–≤–Ω—É—é —Ä–∞–±–æ—Ç—É |
| `pending` | –û–∂–∏–¥–∞–Ω–∏–µ | –û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞/—Ç—Ä–µ—Ç—å–µ–π —Å—Ç–æ—Ä–æ–Ω—ã |
| `resolved` | –†–µ—à—ë–Ω | –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞, –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è |
| `closed` | –ó–∞–∫—Ä—ã—Ç | –¢–∏–∫–µ—Ç –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã—Ç |

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | SLA (–ø—Ä–∏–º–µ—Ä) |
|-----------|----------|--------------|
| `low` | –ù–∏–∑–∫–∏–π | –û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ |
| `normal` | –û–±—ã—á–Ω—ã–π | –û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 4 —á–∞—Å–æ–≤ |
| `high` | –í—ã—Å–æ–∫–∏–π | –û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 1 —á–∞—Å–∞ |
| `urgent` | –°—Ä–æ—á–Ω—ã–π | –û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç |

---

## üìä API Endpoints

### 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤

```http
GET /api/tickets
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (new, open, in_progress, resolved, closed, pending)
- `priority` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É (low, normal, high, urgent)
- `assignedUserId` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–º—É –æ–ø–µ—Ä–∞—Ç–æ—Ä—É
- `category` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)
- `sortBy` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (createdAt, updatedAt, priority, status)
- `sortOrder` - –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (asc, desc)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X GET "http://localhost:4000/api/tickets?status=open&priority=high&page=1&limit=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "tickets": [
    {
      "id": 51,
      "ticketNumber": 1234,
      "status": "open",
      "priority": "high",
      "subject": "–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–ø–ª–∞—Ç–æ–π",
      "category": "—Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞",
      "tags": ["–æ–ø–ª–∞—Ç–∞", "—Å—Ä–æ—á–Ω–æ"],
      "assignedUser": {
        "id": 1,
        "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
      },
      "unreadCount": 3,
      "createdAt": "2025-01-16T10:00:00Z",
      "updatedAt": "2025-01-16T12:30:00Z",
      "lastMessageAt": "2025-01-16T12:30:00Z"
    }
  ],
  "pagination": {
    "total": 100,
    "page": 1,
    "limit": 10,
    "pages": 10
  }
}
```

---

### 2. –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–∫–µ—Ç –ø–æ –Ω–æ–º–µ—Ä—É

```http
GET /api/tickets/:ticketNumber
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X GET "http://localhost:4000/api/tickets/1234" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "id": 51,
  "ticketNumber": 1234,
  "status": "open",
  "priority": "high",
  "subject": "–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–ø–ª–∞—Ç–æ–π",
  "category": "—Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞",
  "tags": ["–æ–ø–ª–∞—Ç–∞", "—Å—Ä–æ—á–Ω–æ"],
  "assignedUser": {
    "id": 1,
    "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "email": "ivan@example.com"
  },
  "assignedAt": "2025-01-16T10:30:00Z",
  "internalNotes": "–ö–ª–∏–µ–Ω—Ç –∑–≤–æ–Ω–∏–ª –≤ –±–∞–Ω–∫, –∂–¥—ë–º –æ—Ç–≤–µ—Ç–∞",
  "unreadCount": 3,
  "firstResponseAt": "2025-01-16T10:15:00Z",
  "createdAt": "2025-01-16T10:00:00Z",
  "updatedAt": "2025-01-16T12:30:00Z",
  "lastMessageAt": "2025-01-16T12:30:00Z",
  "client": {
    "phoneJid": "79001234567@s.whatsapp.net",
    "name": "–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤"
  },
  "messages": [
    // –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  ]
}
```

---

### 3. –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ç–∏–∫–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä—É

```http
POST /api/tickets/:ticketNumber/assign
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "userId": 1
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X POST "http://localhost:4000/api/tickets/1234/assign" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"userId": 1}'
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "ticket": {
    "id": 51,
    "ticketNumber": 1234,
    "assignedUserId": 1,
    "assignedAt": "2025-01-16T13:00:00Z"
  },
  "history": {
    "changeType": "assigned",
    "description": "–¢–∏–∫–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
  }
}
```

---

### 4. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ç–∏–∫–µ—Ç–∞

```http
POST /api/tickets/:ticketNumber/status
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "status": "resolved",
  "reason": "–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –ø–æ—Å–ª–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –±–∞–Ω–∫–æ–º"
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X POST "http://localhost:4000/api/tickets/1234/status" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "resolved",
    "reason": "–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –ø–æ—Å–ª–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –±–∞–Ω–∫–æ–º"
  }'
```

---

### 5. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–∏–∫–µ—Ç–∞

```http
POST /api/tickets/:ticketNumber/priority
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "priority": "urgent"
}
```

---

### 6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏

#### –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥
```http
POST /api/tickets/:ticketNumber/tags
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "tag": "vip"
}
```

#### –£–¥–∞–ª–∏—Ç—å —Ç–µ–≥
```http
DELETE /api/tickets/:ticketNumber/tags/:tag
```

---

### 7. –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç–∏–∫–µ—Ç–∞

```http
GET /api/tickets/:ticketNumber/history
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "history": [
    {
      "id": 1,
      "changeType": "status_changed",
      "oldValue": "new",
      "newValue": "open",
      "description": "–°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω —Å new –Ω–∞ open",
      "user": {
        "id": 1,
        "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
      },
      "createdAt": "2025-01-16T10:15:00Z"
    },
    {
      "id": 2,
      "changeType": "assigned",
      "newValue": "1",
      "description": "–¢–∏–∫–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "user": {
        "id": 2,
        "name": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
      },
      "createdAt": "2025-01-16T10:30:00Z"
    },
    {
      "id": 3,
      "changeType": "priority_changed",
      "oldValue": "normal",
      "newValue": "high",
      "description": "–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏–∑–º–µ–Ω–µ–Ω —Å normal –Ω–∞ high",
      "user": {
        "id": 1,
        "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
      },
      "createdAt": "2025-01-16T11:00:00Z"
    }
  ]
}
```

---

### 8. –î–æ–±–∞–≤–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –∑–∞–º–µ—Ç–∫—É

```http
POST /api/tickets/:ticketNumber/notes
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "note": "–ö–ª–∏–µ–Ω—Ç –∑–≤–æ–Ω–∏–ª –≤ –±–∞–Ω–∫, –∂–¥—ë–º –æ—Ç–≤–µ—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞"
}
```

---

### 9. –û—Ü–µ–Ω–∏—Ç—å —Ç–∏–∫–µ—Ç

```http
POST /api/tickets/:ticketNumber/rate
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "rating": 5,
  "comment": "–û—Ç–ª–∏—á–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, —Å–ø–∞—Å–∏–±–æ!"
}
```

---

### 10. –ó–∞–∫—Ä—ã—Ç—å —Ç–∏–∫–µ—Ç

```http
POST /api/tickets/:ticketNumber/close
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "reason": "resolved",  // resolved, duplicate, spam, other
  "comment": "–ü—Ä–æ–±–ª–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–µ–Ω–∞"
}
```

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–∏–∫–µ—Ç–∞–º

```http
GET /api/tickets/stats
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "total": 1500,
  "byStatus": {
    "new": 50,
    "open": 200,
    "in_progress": 150,
    "pending": 30,
    "resolved": 70,
    "closed": 1000
  },
  "byPriority": {
    "low": 300,
    "normal": 900,
    "high": 250,
    "urgent": 50
  },
  "avgResponseTime": "2.5 hours",
  "avgResolutionTime": "8.3 hours",
  "satisfactionRate": 4.7
}
```

---

## üîî –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞:
1. –ï—Å–ª–∏ —á–∞—Ç–∞ –Ω–µ—Ç - —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π —Å `status: "new"`
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä —Ç–∏–∫–µ—Ç–∞
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —á–µ—Ä–µ–∑ AI/–ø—Ä–∞–≤–∏–ª–∞)
4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`normal`)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è:
- Round-robin (–ø–æ –æ—á–µ—Ä–µ–¥–∏)
- –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- –ü–æ –Ω–∞–≥—Ä—É–∑–∫–µ (–æ–ø–µ—Ä–∞—Ç–æ—Ä—É —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤)
- –ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É (—Å—Ä–æ—á–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã - —Å—Ç–∞—Ä—à–∏–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º)

---

## üé® Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ (React)

```jsx
import React, { useState, useEffect } from 'react';
import axios from 'axios';

function TicketList() {
  const [tickets, setTickets] = useState([]);
  const [filter, setFilter] = useState({
    status: '',
    priority: '',
    page: 1
  });

  useEffect(() => {
    fetchTickets();
  }, [filter]);

  const fetchTickets = async () => {
    const params = new URLSearchParams(filter);
    const response = await axios.get(`/api/tickets?${params}`, {
      headers: { Authorization: `Bearer ${token}` }
    });
    setTickets(response.data.tickets);
  };

  const assignTicket = async (ticketNumber, userId) => {
    await axios.post(`/api/tickets/${ticketNumber}/assign`, 
      { userId },
      { headers: { Authorization: `Bearer ${token}` } }
    );
    fetchTickets(); // –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
  };

  return (
    <div className="ticket-list">
      {/* –§–∏–ª—å—Ç—Ä—ã */}
      <div className="filters">
        <select onChange={(e) => setFilter({...filter, status: e.target.value})}>
          <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
          <option value="new">–ù–æ–≤—ã–µ</option>
          <option value="open">–û—Ç–∫—Ä—ã—Ç—ã–µ</option>
          <option value="in_progress">–í —Ä–∞–±–æ—Ç–µ</option>
          <option value="resolved">–†–µ—à—ë–Ω–Ω—ã–µ</option>
          <option value="closed">–ó–∞–∫—Ä—ã—Ç—ã–µ</option>
        </select>
      </div>

      {/* –°–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤ */}
      {tickets.map(ticket => (
        <div key={ticket.id} className="ticket-card">
          <h3>#{ticket.ticketNumber} - {ticket.subject}</h3>
          <div className="ticket-meta">
            <span className={`status status-${ticket.status}`}>
              {ticket.status}
            </span>
            <span className={`priority priority-${ticket.priority}`}>
              {ticket.priority}
            </span>
            {ticket.unreadCount > 0 && (
              <span className="unread-badge">{ticket.unreadCount}</span>
            )}
          </div>
          {ticket.assignedUser && (
            <p>–ù–∞–∑–Ω–∞—á–µ–Ω: {ticket.assignedUser.name}</p>
          )}
        </div>
      ))}
    </div>
  );
}
```

---

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –†–∞–±–æ—Ç–∞ —Å —Ç–∏–∫–µ—Ç–∞–º–∏
- **–í—Å–µ–≥–¥–∞** —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∞–∂–Ω—ã—Ö –ø–æ–ª–µ–π
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏
- **–û–±–Ω–æ–≤–ª—è–π—Ç–µ** —Å—Ç–∞—Ç—É—Å —Ç–∏–∫–µ—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ** –º–µ—Ç—Ä–∏–∫–∏ SLA (firstResponseAt, resolvedAt)

### 2. –¢–µ–≥–∏
- –•—Ä–∞–Ω–∏—Ç–µ —Ç–µ–≥–∏ –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ: `["vip", "urgent", "payment"]`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –¢–µ–≥–∏ –ø–æ–º–æ–≥–∞—é—Ç –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- VIP –∫–ª–∏–µ–Ω—Ç—ã ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ `high` –∏–ª–∏ `urgent`
- –î–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

### 4. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤—Å–µ –≤–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –∞—É–¥–∏—Ç–∞
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–Ω—è—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Ç–∏–∫–µ—Ç—ã —Å–≤–æ–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –Ω–µ –≤–∏–¥–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞–º

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

1. –ö–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç –≤ WhatsApp
2. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç —á–∞—Ç —Å `status: "new"`, –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç ticketNumber
3. –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –Ω–æ–≤—ã–π —Ç–∏–∫–µ—Ç –≤ —Å–ø–∏—Å–∫–µ
4. –û–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç–∏–∫–µ—Ç ‚Üí —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `"open"`
5. –û–ø–µ—Ä–∞—Ç–æ—Ä –±–µ—Ä—ë—Ç –≤ —Ä–∞–±–æ—Ç—É ‚Üí `"in_progress"`
6. –†–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí `"resolved"`
7. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç ‚Üí `"closed"`

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –≠—Å–∫–∞–ª–∞—Ü–∏—è —Ç–∏–∫–µ—Ç–∞

1. –¢–∏–∫–µ—Ç —Å `priority: "normal"`
2. –ö–ª–∏–µ–Ω—Ç –∂–∞–ª—É–µ—Ç—Å—è –Ω–∞ –¥–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ
3. –û–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Üí `"high"`
4. –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
5. –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π —Ç–∏–∫–µ—Ç
6. –¢–∏–∫–µ—Ç —Ä–µ—à–∞–µ—Ç—Å—è –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

---

## üöÄ –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ticketNumber
- ‚úÖ SLA –º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–ª–µ—Ä—Ç—ã
- ‚úÖ –®–∞–±–ª–æ–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —á–∞—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ –û—Ç—á—ë—Ç—ã –∏ –¥–∞—à–±–æ—Ä–¥—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è (AI)
- ‚úÖ –ß–∞—Ç-–±–æ—Ç—ã –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 16 —è–Ω–≤–∞—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
